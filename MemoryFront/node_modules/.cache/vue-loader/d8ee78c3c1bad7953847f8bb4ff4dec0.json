{"remainingRequest":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SpringBoot-master\\MemoryFront\\src\\views\\Record.vue?vue&type=style&index=0&id=4917ee8b&scoped=true&lang=css","dependencies":[{"path":"D:\\SpringBoot-master\\MemoryFront\\src\\views\\Record.vue","mtime":1716967218000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgI21haW57CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB3aWR0aDoxMDAlOwogIH0KLmJ1dHRvbiB7CiBwb3NpdGlvbjphYnNvbHV0ZTsKIHRvcDo5MCU7CiBsZWZ0OjQ1JTsKfQo="},{"version":3,"sources":["Record.vue"],"names":[],"mappings":";AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Record.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"main\">\r\n    <el-table :data=\"tableData\" style=\"width: 100%;\" height=\"500\"  >\r\n      <el-table-column prop=\"date\" label=\"日期\" >\r\n      </el-table-column>\r\n      <el-table-column prop=\"week\" label=\"星期\" >\r\n      </el-table-column>\r\n      <el-table-column prop=\"operation\" label=\"操作记录\" >\r\n      </el-table-column>\r\n      <el-table-column prop=\"number\" label=\"数量\" >\r\n      </el-table-column>\r\n      <el-table-column prop=\"ipv4\" label=\"Ip地址\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"delete\" label=\"删除\" >\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\" circle\r\n            @click=\"deleRecordById(tableData[scope.$index].id)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-button class=\"button\" type=\"danger\" @click=\"deleteAllRecord\">清空所有记录</el-button>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'record',\r\n  data() {\r\n    return {\r\n      toekn:'',\r\n      tableData: [{\r\n        id:1,\r\n        date: '2016-05-03:18:00',\r\n        week: '星期一',\r\n        operation: '上传图片',\r\n        number: 12,\r\n        ipv4: '192.168.1.1',\r\n      },\r\n      ],\r\n     \r\n    }\r\n  },\r\n  mounted() {\r\n    var cookie = this.$cookie.getCookie();\r\n    if (cookie[0] != \"token\") {\r\n      this.$message({\r\n        message: '登录已过期!',\r\n        type: 'error'\r\n      });\r\n      this.$router.push({ name: 'login' });\r\n    }\r\n    else {\r\n      this.token = cookie[1];\r\n    }\r\n    \r\n    this.selectAllRecord();\r\n  },\r\n  methods: {\r\n    selectAllRecord() {\r\n      var _this = this;\r\n      const formData = new FormData();\r\n      formData.append('token', this.token);\r\n      this.axios({\r\n        url: this.$serveUrL+\"/record/selectAll\",\r\n        method: \"post\",\r\n        data: formData,\r\n      }).then(function (resp) {\r\n       if(resp.data.status=='success'){\r\n        _this.tableData = resp.data.data;\r\n       }\r\n      }\r\n      );\r\n    },\r\n    deleteAllRecord() {\r\n      this.$confirm('是否清空所有记录?', '删除所有记录', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n       var _this = this;\r\n        const formData = new FormData();\r\n       formData.append('token', this.token);\r\n        this.axios({\r\n          url: this.$serveUrL+\"/record/deleteAll\",\r\n          method: \"post\",\r\n          data: formData,\r\n        }).then(function (resp) {\r\n        \r\n          if(resp.data.status=='success'){ \r\n             _this.selectAllRecord();\r\n          _this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        });\r\n        }\r\n        }\r\n        );\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n    deleRecordById(id) {\r\n      var _this = this;\r\n      const formData = new FormData();\r\n      formData.append('token', this.token);\r\n      let Ids = Array(1);\r\n      Ids.push(id);\r\n      formData.append('Ids',Ids);\r\n      this.axios({\r\n        url: this.$serveUrL+\"/record/deleteById\",\r\n        method: \"post\",\r\n        data: formData,\r\n      }).then(function (resp) {\r\n        console.log(resp.data)\r\n        if(resp.data.status=='success'){\r\n          _this.selectAllRecord();\r\n          _this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        });\r\n        }\r\n      }\r\n      );\r\n   \r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n  #main{\r\n    position: relative;\r\n    height: 100%;\r\n    width:100%;\r\n  }\r\n.button {\r\n position:absolute;\r\n top:90%;\r\n left:45%;\r\n}\r\n</style>"]}]}