{"remainingRequest":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\babel-loader\\lib\\index.js!D:\\SpringBoot-master\\MemoryFront\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\SpringBoot-master\\MemoryFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SpringBoot-master\\MemoryFront\\src\\views\\VisualdataSite.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\SpringBoot-master\\MemoryFront\\src\\views\\VisualdataSite.vue","mtime":1716967218000},{"path":"D:\\SpringBoot-master\\MemoryFront\\babel.config.js","mtime":1716967218000},{"path":"D:\\SpringBoot-master\\MemoryFront\\.babelrc","mtime":1716967218000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\SpringBoot-master\\MemoryFront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVmlzdWFsZGF0YScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYXJ0czogbnVsbCwKICAgICAgLy/lm77ooajlr7nosaEKICAgICAgdG9rZW46ICcnLAogICAgICAvL3Rva2Vu5Yet6K+BCiAgICAgIHJlc2l6ZVRpbWVyOiBudWxsLAogICAgICBzZXJ2ZVVyTDogdGhpcy4kc2VydmVVckwsCiAgICAgIHNwb3RzOiBbJ+ilv+WuiScsICflronlurcnXSwKICAgICAgLy9iYXLlnLDngrkKICAgICAgc3BvdENvdW50OiBbMTIsIDEzXSAvL2JhcuaVsOmHjwogICAgfTsKICB9LAogIC8v6LCD55SoCiAgbW91bnRlZCgpIHsKICAgIHdpbmRvdy5vbnJlc2l6ZSA9ICgpID0+IHsKICAgICAgaWYgKHRoaXMucmVzaXplVGltZXIpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lcik7CiAgICAgIH0KICAgICAgdGhpcy5yZXNpemVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuY2hhcnRzLnJlc2l6ZSgpOwogICAgICB9LCA1MDApOwogICAgfTsKICAgIHZhciBjb29raWUgPSB0aGlzLiRjb29raWUuZ2V0Q29va2llKCk7CiAgICBpZiAoY29va2llWzBdICE9ICJ0b2tlbiIpIHsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+eZu+W9leW3sui/h+acnyEnLAogICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgfSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50b2tlbiA9IGNvb2tpZVsxXTsKICAgIH0KICAgIHRoaXMuc2VsZWN0SW1hZ2VDb3VudCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5LiL6L295Zu+54mHCiAgICBkb3dubG9hZEltYWdlKCkgewogICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBsaW5rLmRvd25sb2FkID0gIuWbvueJh+exu+Wei+WIhuW4g+mlvOWbviI7CiAgICAgIGxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgY29uc29sZS5sb2codGhpcy5jaGFydHMpOwogICAgICBsaW5rLmhyZWYgPSB0aGlzLmNoYXJ0cy5nZXREYXRhVVJMKHsKICAgICAgICB0eXBlOiAncG5nJywKICAgICAgICBwaXhlbFJhdGlvOiAxLjUsCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicKICAgICAgfSk7IC8vIOWvvOWHuuWbvuihqOWbvueJh++8jOi/lOWbnuS4gOS4qiBiYXNlNjQg55qEIFVSTAogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgICBsaW5rLmNsaWNrKCk7CiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwobGluay5ocmVmKTsgLy/ph4rmlL5VUkzlr7nosaEKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIH0sCiAgICAvL+afpeivouaJgOacieWbvueJh+exu+WeiwogICAgc2VsZWN0SW1hZ2VDb3VudCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd0b2tlbicsIHRoaXMudG9rZW4pOwogICAgICB0aGlzLmF4aW9zKHsKICAgICAgICB1cmw6IF90aGlzLnNlcnZlVXJMICsgIi92aXN1YWwvc2VsZWN0VHlwZVNpdGUiLAogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIGRhdGE6IGZvcm1EYXRhCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpcy5zcG90cyA9IHJlc3AuZGF0YS5kYXRhLmltYWdlU2l0ZTsKICAgICAgICBfdGhpcy5zcG90Q291bnQgPSByZXNwLmRhdGEuZGF0YS5TaXRlTnVtYmVyOwogICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5kcmF3YmFyKCdlY2hhcnQnKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZHJhd2JhcihpZCkgewogICAgICB0aGlzLmNoYXJ0cyA9IHRoaXMuJGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpOwogICAgICB0aGlzLmNoYXJ0cy5zZXRPcHRpb24oewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICBjb2xvcjogJ3JlcycsCiAgICAgICAgICB0ZXh0OiAn5ouN5pGE5Zyw54K55YiG5biD5p+x54q25Zu+JywKICAgICAgICAgIHN1YnRleHQ6ICfmnaXmupDkuo7mlbDmja7lupMnLAogICAgICAgICAgbGVmdDogJ2NlbnRlcicKICAgICAgICB9LAogICAgICAgIHhBeGlzOiB7CiAgICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLAogICAgICAgICAgZGF0YTogdGhpcy5zcG90cywKICAgICAgICAgIG5hbWU6ICfmi43mkYTlnLDngrknCiAgICAgICAgfSwKICAgICAgICB5QXhpczogewogICAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICAgIG5hbWU6ICflm77niYfmlbDph48nCiAgICAgICAgfSwKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICBkYXRhOiB0aGlzLnNwb3RDb3VudCwKICAgICAgICAgIHR5cGU6ICdiYXInLAogICAgICAgICAgc2hvd0JhY2tncm91bmQ6IHRydWUsCiAgICAgICAgICBiYWNrZ3JvdW5kU3R5bGU6IHsKICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDE4MCwgMTgwLCAxODAsIDAuMiknCiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["name","data","charts","token","resizeTimer","serveUrL","$serveUrL","spots","spotCount","mounted","window","onresize","clearTimeout","setTimeout","resize","cookie","$cookie","getCookie","$message","message","type","$router","push","selectImageCount","methods","downloadImage","link","document","createElement","download","style","display","console","log","href","getDataURL","pixelRatio","backgroundColor","body","appendChild","click","URL","revokeObjectURL","removeChild","_this","formData","FormData","append","axios","url","method","then","resp","imageSite","SiteNumber","$nextTick","drawbar","id","$echarts","init","getElementById","setOption","title","color","text","subtext","left","xAxis","yAxis","series","showBackground","backgroundStyle"],"sources":["src/views/VisualdataSite.vue"],"sourcesContent":["<template>\r\n  <div id=\"v-main\">\r\n    <div id=\"v-title\">图片地理位置数据可视化</div>\r\n    <!--为echarts准备一个具备大小的容器dom-->\r\n    <div id=\"v-echart\">\r\n      <div id=\"echart\"></div>\r\n      <div class=\"button\">\r\n        <el-button type=\"primary\" @click=\"downloadImage()\">下载图表</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n  name: 'Visualdata',\r\n  data() {\r\n    return {\r\n      charts: null,//图表对象\r\n      token: '',  //token凭证\r\n      resizeTimer: null,\r\n      serveUrL: this.$serveUrL,\r\n      spots: ['西安', '安康'],  //bar地点\r\n      spotCount: [12, 13] //bar数量\r\n    }\r\n  },\r\n  //调用\r\n  mounted() {\r\n    window.onresize = () => {\r\n      if (this.resizeTimer) {\r\n        clearTimeout(this.resizeTimer)\r\n      }\r\n      this.resizeTimer = setTimeout(() => {\r\n        this.charts.resize();\r\n      }, 500)\r\n    };\r\n    var cookie = this.$cookie.getCookie();\r\n    if (cookie[0] != \"token\") {\r\n      this.$message({\r\n        message: '登录已过期!',\r\n        type: 'error'\r\n      });\r\n      this.$router.push({ name: 'login' });\r\n    }\r\n    else {\r\n      this.token = cookie[1];\r\n    }\r\n    this.selectImageCount();\r\n\r\n  },\r\n  methods: {\r\n    // 下载图片\r\n    downloadImage() {\r\n      const link = document.createElement('a');\r\n      link.download = \"图片类型分布饼图\";\r\n      link.style.display = 'none';\r\n      console.log(this.charts)\r\n      link.href = this.charts.getDataURL({\r\n        type: 'png',\r\n        pixelRatio: 1.5,\r\n        backgroundColor: '#fff'\r\n      }); // 导出图表图片，返回一个 base64 的 URL\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      URL.revokeObjectURL(link.href); //释放URL对象\r\n      document.body.removeChild(link);\r\n    },\r\n    //查询所有图片类型\r\n    selectImageCount() {\r\n      var _this = this;\r\n      const formData = new FormData();\r\n      formData.append('token', this.token);\r\n      this.axios({\r\n        url: _this.serveUrL + \"/visual/selectTypeSite\",\r\n        method: \"post\",\r\n        data: formData,\r\n      }).then(function (resp) {\r\n\r\n        _this.spots = resp.data.data.imageSite;\r\n        _this.spotCount = resp.data.data.SiteNumber;\r\n        _this.$nextTick(function () {\r\n          _this.drawbar('echart');\r\n        });\r\n\r\n      });\r\n    },\r\n\r\n    drawbar(id) {\r\n      this.charts = this.$echarts.init(document.getElementById(id))\r\n      this.charts.setOption({\r\n        title: {\r\n          color: 'res',\r\n          text: '拍摄地点分布柱状图',\r\n          subtext: '来源于数据库',\r\n          left: 'center'\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          data: this.spots,\r\n          name: '拍摄地点'\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          name: '图片数量'\r\n        },\r\n        series: [\r\n          {\r\n            data: this.spotCount,\r\n            type: 'bar',\r\n            showBackground: true,\r\n            backgroundStyle: {\r\n              color: 'rgba(180, 180, 180, 0.2)'\r\n            }\r\n          }\r\n        ],\r\n\r\n\r\n      })\r\n\r\n    },\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n<style scoped>\r\n#v-main {\r\n  width: 100%;\r\n  height: 90%;\r\n  position: relative;\r\n}\r\n\r\n#v-title {\r\n  margin-top: 1%;\r\n  margin-bottom: 2%;\r\n  text-align: center;\r\n  font-size: 25px;\r\n}\r\n\r\n#v-echart {\r\n  height: 90%;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n\r\n#echart {\r\n  position: absolute;\r\n  left: 3%;\r\n  height: 100%;\r\n  width: 80%;\r\n  display: inline-block;\r\n}\r\n\r\n.button {\r\n  position: absolute;\r\n  display: inline-block;\r\n  right: 5%;\r\n}\r\n</style>"],"mappings":";AAcA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;MAAA;MACAC,KAAA;MAAA;MACAC,WAAA;MACAC,QAAA,OAAAC,SAAA;MACAC,KAAA;MAAA;MACAC,SAAA;IACA;EACA;EACA;EACAC,QAAA;IACAC,MAAA,CAAAC,QAAA;MACA,SAAAP,WAAA;QACAQ,YAAA,MAAAR,WAAA;MACA;MACA,KAAAA,WAAA,GAAAS,UAAA;QACA,KAAAX,MAAA,CAAAY,MAAA;MACA;IACA;IACA,IAAAC,MAAA,QAAAC,OAAA,CAAAC,SAAA;IACA,IAAAF,MAAA;MACA,KAAAG,QAAA;QACAC,OAAA;QACAC,IAAA;MACA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAtB,IAAA;MAAA;IACA,OACA;MACA,KAAAG,KAAA,GAAAY,MAAA;IACA;IACA,KAAAQ,gBAAA;EAEA;EACAC,OAAA;IACA;IACAC,cAAA;MACA,MAAAC,IAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,IAAA,CAAAG,QAAA;MACAH,IAAA,CAAAI,KAAA,CAAAC,OAAA;MACAC,OAAA,CAAAC,GAAA,MAAA/B,MAAA;MACAwB,IAAA,CAAAQ,IAAA,QAAAhC,MAAA,CAAAiC,UAAA;QACAf,IAAA;QACAgB,UAAA;QACAC,eAAA;MACA;MACAV,QAAA,CAAAW,IAAA,CAAAC,WAAA,CAAAb,IAAA;MACAA,IAAA,CAAAc,KAAA;MACAC,GAAA,CAAAC,eAAA,CAAAhB,IAAA,CAAAQ,IAAA;MACAP,QAAA,CAAAW,IAAA,CAAAK,WAAA,CAAAjB,IAAA;IACA;IACA;IACAH,iBAAA;MACA,IAAAqB,KAAA;MACA,MAAAC,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA,eAAA5C,KAAA;MACA,KAAA6C,KAAA;QACAC,GAAA,EAAAL,KAAA,CAAAvC,QAAA;QACA6C,MAAA;QACAjD,IAAA,EAAA4C;MACA,GAAAM,IAAA,WAAAC,IAAA;QAEAR,KAAA,CAAArC,KAAA,GAAA6C,IAAA,CAAAnD,IAAA,CAAAA,IAAA,CAAAoD,SAAA;QACAT,KAAA,CAAApC,SAAA,GAAA4C,IAAA,CAAAnD,IAAA,CAAAA,IAAA,CAAAqD,UAAA;QACAV,KAAA,CAAAW,SAAA;UACAX,KAAA,CAAAY,OAAA;QACA;MAEA;IACA;IAEAA,QAAAC,EAAA;MACA,KAAAvD,MAAA,QAAAwD,QAAA,CAAAC,IAAA,CAAAhC,QAAA,CAAAiC,cAAA,CAAAH,EAAA;MACA,KAAAvD,MAAA,CAAA2D,SAAA;QACAC,KAAA;UACAC,KAAA;UACAC,IAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACAC,KAAA;UACA/C,IAAA;UACAnB,IAAA,OAAAM,KAAA;UACAP,IAAA;QACA;QACAoE,KAAA;UACAhD,IAAA;UACApB,IAAA;QACA;QACAqE,MAAA,GACA;UACApE,IAAA,OAAAO,SAAA;UACAY,IAAA;UACAkD,cAAA;UACAC,eAAA;YACAR,KAAA;UACA;QACA;MAIA;IAEA;EAEA;AAEA","ignoreList":[]}]}